{% extends 'blog/base.html' %}

{% block content %}
	<center>
		<div class="col-md-6 col-12 mx-md-auto mx-3 mt-5 mb-5">
			<h1 class="fw-bolder">Blog Spot</h1>
			
			{% if submitted %}
			<div class="btn btn-success">Subscribed</div>
			{% else %}
			<form action="" method="post">
				{% csrf_token %}
				<div class="form-group" style="display: flex; align-items: center;">
					<input type="email" class="form-control" id="umail" name="email" placeholder="Subscribe to our blogs"
						   style="flex: 1; margin-right: 10px; padding: 5px; box-sizing: border-box;">
					<button name="button" value="{{ success }}" type="submit" 
							class="btn btn-info"
							style="padding: 5px 10px; background-color: #17a2b8; color: white; border: none; cursor: pointer;">
					  Submit
					</button>
				  </div>			</form>
			{% endif %}
				</div>
	</center>
{% load static %}
<div class="row">

	{% for object in object_list %}
	<div class="col-lg-4 col-md-6 col-sm-12 mb-4 ">
		<div class="card">
			{% if object.image %}
			<img src="/media/{{ object.image }}" class="card-img-top">
			{% else %}
			<img src="/media/default-ui-image-placeholder-wireframes-600nw-1037719192 (1).png" class="card-img-top">
			{% endif %}
			<div class="card-body">
				<h5 class="card-title">{{ object.title }}</h5>
				<p>{{ object.date }}</p>
				
				{% if object.likes.count == 1 %}
				<p>{{ object.likes }} person likes this post</p>
				{% else %}
				<p>{{ object.likes }} people like this post</p>
				{% endif %}
				<div class="my-3">
				{{ object.content|truncatewords_html:20|safe}}
				</div>
				<a href="{% url 'detail_blog' object.id %}" class="btn btn-primary">Read More</a>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
	
{% endblock content %}